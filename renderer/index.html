<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>İkinci Ekran</title>
    <style>
      html, body { margin:0; padding:0; width:100%; height:100%; background:#0b0b0f; color:#f3f4f6; font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",sans-serif; }
      .wrap { display:flex; flex-direction:column; width:100%; height:100%; }
      .header { padding:16px; font-weight:700; background:#111827; border-bottom:1px solid #1f2937; }
      .content { flex:1; padding:20px; overflow:auto; }
      .card { background:#111827; border:1px solid #1f2937; border-radius:12px; padding:16px; margin-bottom:12px; }
      .total { font-size:28px; font-weight:800; color:#22c55e; }
      .muted { color:#9ca3af; }
    </style>
  </head>
  <body>
    <div class="wrap">
      <div class="header">Müşteri Görünümü</div>
      <div class="content">
        <div id="status" class="muted">Bekleniyor…</div>
        <div id="orderNo" class="card muted"></div>
        <div id="items"></div>
        <div id="total" class="card total"></div>
      </div>
    </div>
    <script>
      const { ipcRenderer } = require('electron');
      function render(payload){
        const items = Array.isArray(payload.orderItems) ? payload.orderItems : [];
        document.getElementById('status').textContent = payload.isCompleted ? 'Tamamlandı' : 'Aktif Sipariş';
        document.getElementById('orderNo').textContent = payload.orderNo ? ('Sipariş No: ' + payload.orderNo) : '';
        const itemsDiv = document.getElementById('items');
        itemsDiv.innerHTML = '';
        items.forEach(it => {
          const el = document.createElement('div');
          el.className = 'card';
          el.textContent = `${it.miktar || 1}x ${it.urunAdi || ''}`;
          itemsDiv.appendChild(el);
        });
        document.getElementById('total').textContent = typeof payload.totalAmount === 'number' ? `Toplam: ${payload.totalAmount.toFixed(2)} ₺` : '';
      }
      ipcRenderer.on('data:update', (_ev, data) => render(data||{}));
      ipcRenderer.on('data:clear', (_ev, data) => render(data||{isCompleted:true, orderItems:[], totalAmount:0}));
    </script>
  </body>
  </html>


